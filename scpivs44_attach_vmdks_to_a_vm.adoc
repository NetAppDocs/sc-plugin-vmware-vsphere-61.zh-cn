---
sidebar: sidebar 
permalink: scpivs44_attach_vmdks_to_a_vm.html 
keywords:  
summary: 您可以将备份中的一个或多个 VMDK 附加到父虚拟机，或附加到同一 ESXi 主机上的备用虚拟机，或附加到由同一 vCenter 或链接模式下的不同 vCenter 管理的备用 ESXi 主机上的备用虚拟机。支持传统数据存储和 vVol 数据存储中的虚拟机。 
---
= 将 VMDK 附加到 VM 或 vVol VM
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
您可以将备份中的一个或多个 VMDK 附加到父虚拟机，或附加到同一 ESXi 主机上的备用虚拟机，或附加到由同一 vCenter 或链接模式下的不同 vCenter 管理的备用 ESXi 主机上的备用虚拟机。支持传统数据存储和 vVol 数据存储中的虚拟机。

这使得从驱动器恢复一个或多个单独的文件变得更容易，而不是恢复整个驱动器。恢复或访问所需文件后，您可以分离 VMDK。

.关于此任务
您有以下附加选项：

* 您可以从主备份或辅助备份附加虚拟磁盘。
* 您可以将虚拟磁盘附加到父虚拟机（虚拟磁盘最初关联的同一虚拟机）或同一 ESXi 主机上的备用虚拟机。


连接虚拟磁盘存在以下限制：

* 虚拟机模板不支持附加和分离操作。
* 当超过 15 个 VMDK 连接到 iSCSI 控制器时，由于 VMware 的限制，SnapCenter Plug-in for VMware vSphere的虚拟机无法找到高于 15 的 VMDK 单元编号。
+
在这种情况下，请手动添加 SCSi 控制器并再次尝试连接操作。

* 您无法手动连接作为客户机文件还原操作的一部分而连接或安装的虚拟磁盘。
* 连接和恢复操作使用默认的 SCSi 控制器连接 VMDK。但是，当备份连接到具有 NVMe 磁盘的 VM 的 VMDK 时，连接和恢复操作会使用 NVMe 控制器（如果可用）。


.开始之前
按照以下步骤将 NVMe 控制器添加到磁盘。

. 登录 vCenter 客户端
. 从 VMFS 数据存储中选择虚拟机
. 右键单击虚拟机并转到*编辑设置*
. 在编辑设置窗口中，选择 *添加新设备* > *NVMe 控制器*


.步骤
. 在 VMware vSphere 客户端 GUI 中，选择工具栏中的 *菜单*，然后从下拉列表中选择 *主机和集群*。
. 在左侧导航窗格中，右键单击虚拟机，然后选择 * SnapCenter Plug-in for VMware vSphere* > * 附加虚拟磁盘 *。
. 在“*附加虚拟磁盘*”窗口的“*备份*”部分中，选择一个备份。
+
您可以通过选择过滤器图标并选择日期和时间范围来过滤备份列表，选择是否需要包含 VMware 快照的备份、是否需要已安装的备份以及位置。选择“确定”。

. 在“选择磁盘”部分中，选择要附加的一个或多个磁盘以及要从中附加的位置（主磁盘或辅助磁盘）。
+
您可以更改过滤器以显示主要位置和次要位置。

. 默认情况下，选定的虚拟磁盘将附加到父虚拟机。要将选定的虚拟磁盘连接到同一 ESXi 主机中的备用 VM，请选择*单击此处连接到备用 VM*并指定备用 VM。
. 选择*附加*。
. 可选：在“最近任务”部分监控操作进度。
+
刷新屏幕以显示更新的信息。

. 通过执行以下操作验证虚拟磁盘是否已连接：
+
.. 在工具栏中选择“*菜单*”，然后从下拉列表中选择“*虚拟机和模板*”。
.. 在左侧导航窗格中，右键单击虚拟机，然后在下拉列表中选择“编辑设置”。
.. 在*编辑设置*窗口中，展开每个硬盘的列表以查看磁盘文件列表。
+
image:scpivs44_image23.png["编辑设置窗口"]

+
编辑设置页面列出了虚拟机上的磁盘。您可以展开每个硬盘的详细信息来查看所连接的虚拟磁盘的列表。





.结果
您可以从主机操作系统访问连接的磁盘，然后从磁盘中检索所需的信息。
